<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ä¼šå“¡ãƒšãƒ¼ã‚¸ï½œã‚»ãƒ¬ãƒã‚¹</title>

<style>
:root{
  --bg:#fbf6f1;
  --card:#ffffff;
  --line:#eadfce;
  --text:#3b352e;
  --muted:#7a6f63;
  --acc:#c9a36a;
  --acc2:#b8945f;
  --shadow:0 14px 28px rgba(0,0,0,.08);
  --radius:26px;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Noto Sans JP",sans-serif;
  background:var(--bg);
  color:var(--text);
}
.wrap{max-width:1000px;margin:auto;padding:22px}
.topbar{
  display:flex;justify-content:space-between;align-items:center;gap:12px;
  margin-bottom:14px;
}
.brand{display:flex;align-items:center;gap:10px}
.badge{
  width:42px;height:42px;border-radius:16px;
  background:linear-gradient(180deg,var(--acc),var(--acc2));
  box-shadow:0 10px 20px rgba(201,163,106,.25);
}
.brand h1{margin:0;font-size:18px}
.brand p{margin:2px 0 0;color:var(--muted);font-size:12px}

.btn{
  display:inline-flex;align-items:center;justify-content:center;
  padding:12px 16px;border-radius:22px;border:none;
  font-weight:800;cursor:pointer;text-decoration:none;
  color:#fff;background:linear-gradient(180deg,var(--acc),var(--acc2));
}
.btn.sub{background:#8b7a63}
.btn.ghost{
  background:transparent;color:var(--text);
  border:1px solid var(--line);
}

.grid{
  display:grid;gap:14px;
  grid-template-columns: 1.2fr .8fr;
}
@media (max-width: 860px){ .grid{grid-template-columns:1fr} }

.card{
  background:var(--card);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:20px;
  border:1px solid rgba(234,223,206,.55);
}
.card h2{margin:0 0 10px;font-size:16px}
.card p{margin:0;color:var(--muted);line-height:1.85}

.hero{display:flex;flex-direction:column;gap:12px}
.welcome{font-size:14px;color:var(--muted)}
.name{margin:0;font-size:20px;line-height:1.25}
.pills{display:flex;gap:8px;flex-wrap:wrap;margin-top:4px}
.pill{
  font-size:12px;color:#6b5f52;
  background:#f7f1e7;border:1px solid var(--line);
  padding:6px 10px;border-radius:999px;
}

.actions{
  display:grid;gap:10px;margin-top:10px;
  grid-template-columns:repeat(2, minmax(0,1fr));
}
@media (max-width: 520px){ .actions{grid-template-columns:1fr} }
.action{
  border:1px solid var(--line);
  border-radius:20px;
  padding:14px;background:#fff;
  text-decoration:none;color:var(--text);
  display:flex;flex-direction:column;gap:6px;
}
.action strong{font-size:14px}
.action span{font-size:12px;color:var(--muted);line-height:1.7}
.action:hover{transform:translateY(-1px);box-shadow:0 10px 18px rgba(0,0,0,.06)}

.list{display:flex;flex-direction:column;gap:10px;margin-top:8px}
.rule{
  background:#f9f5ef;border:1px solid var(--line);
  border-radius:18px;padding:12px 14px;
  font-size:13px;line-height:1.85;color:#6b5f52;
}
hr.sep{border:none;border-top:1px solid var(--line);margin:14px 0}
.small{font-size:12px;color:var(--muted);line-height:1.75;margin-top:10px}

/* ===== ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¡¨ç¤ºï¼ˆã‚³ãƒ³ãƒ‘ã‚¯ãƒˆï¼‰ ===== */
.profileGrid{
  display:grid;
  grid-template-columns:repeat(2, minmax(0,1fr));
  gap:10px;
}
@media (max-width:520px){ .profileGrid{grid-template-columns:1fr} }
.pbox{
  border:1px solid var(--line);
  background:#fff;
  border-radius:16px;
  padding:10px 12px;
}
.pbox .k{font-size:12px;color:var(--muted);margin-bottom:6px}
.pbox .v{font-size:14px;line-height:1.55}
.bio{
  grid-column:1 / -1;
  border:1px solid var(--line);
  background:#fff;
  border-radius:16px;
  padding:12px;
}
.bio .k{font-size:12px;color:var(--muted);margin-bottom:6px}
.bio .v{font-size:14px;line-height:1.7;white-space:pre-wrap}
.miniBtnRow{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}

/* â˜…æ¡ˆå†…æ–‡ */
.notice{
  background:#fff;
  border:1px solid var(--line);
  border-radius:18px;
  padding:12px 14px;
  font-size:13px;
  line-height:1.85;
  color:#6b5f52;
}
.notice strong{color:var(--text)}

/* â˜…è¿½åŠ ï¼šä»Šæ—¥ã®åŠ è­·ï¼ˆç¥åï¼‰ */
.blessing{
  margin-top:10px;
  padding:12px 14px;
  border-radius:18px;
  border:1px solid rgba(234,223,206,.9);
  background:linear-gradient(180deg, rgba(201,163,106,.12), rgba(255,255,255,.92));
}
.blessing .top{
  display:flex;align-items:center;gap:10px;flex-wrap:wrap;
  font-weight:1000;
}
.blessing .gem{
  width:30px;height:30px;border-radius:999px;
  display:inline-flex;align-items:center;justify-content:center;
  background:linear-gradient(180deg,var(--acc),var(--acc2));
  color:#fff;
  box-shadow:0 10px 18px rgba(0,0,0,.10);
  font-size:16px;
}
.blessing .title{font-size:13px;color:var(--text)}
.blessing .name{font-size:14px}
.blessing .desc{
  margin:8px 0 0;
  color:var(--muted);
  font-size:12px;
  line-height:1.85;
  white-space:pre-line;
}
</style>
</head>

<body>
<div class="wrap">

  <div class="topbar">
    <div class="brand">
      <div class="badge" aria-hidden="true"></div>
      <div>
        <h1>ã‚»ãƒ¬ãƒã‚¹ ä¼šå“¡ãƒšãƒ¼ã‚¸</h1>
        <p>ä¾¡å€¤è¦³ãŒè¿‘ã„æ–¹ã‚’ã€å®‰å¿ƒã—ã¦ã”ç´¹ä»‹ã—ã¾ã™</p>
      </div>
    </div>

    <div style="display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end">
      <a class="btn ghost" href="index.html">ãƒˆãƒƒãƒ—</a>
      <button class="btn sub" id="logoutBtn">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
    </div>
  </div>

  <div class="grid">
    <!-- å·¦ -->
    <div class="card hero">
      <div class="welcome" id="welcome">ã‚ˆã†ã“ã</div>
      <h2 class="name" id="name">ä¼šå“¡ã•ã¾</h2>

      <div class="pills">
        <span class="pill" id="pillId" style="display:none;">ä¼šå“¡IDï¼š-</span>
        <span class="pill">å…¥ä¼šè²»ãƒ»æœˆä¼šè²»ï¼šç„¡æ–™</span>
        <span class="pill">ç´¹ä»‹æˆç«‹æ™‚ï¼š5,000å††ï¼ˆç¨è¾¼ï¼‰</span>
      </div>

      <!-- â˜…è¿½åŠ ï¼šä»Šæ—¥ã®åŠ è­·ï¼ˆç¥åï¼‰ -->
      <div class="blessing" aria-label="ä»Šæ—¥ã®åŠ è­·">
        <div class="top">
          <span class="gem" aria-hidden="true">ğŸ›¡ï¸</span>
          <span class="title">ä»Šæ—¥ã®ã”ç¸ãŒå‹•ãã‚„ã™ã„â€œåŠ è­·â€ï¼š</span>
          <span class="name" id="godName">â€”</span>
        </div>
        <div class="desc" id="godDesc">â€”</div>
      </div>

      <div class="actions">
        <a class="action" href="diagnosis.html">
          <strong>ä¾¡å€¤è¦³ãƒ»ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’å…¥åŠ›ã™ã‚‹</strong>
          <span>ã‚ãªãŸã®ã€Œè­²ã‚Œãªã„è»¸ã€ã¨ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’æ•´ãˆã¦ã€ç´¹ä»‹ç²¾åº¦ã‚’ä¸Šã’ã¾ã™ã€‚</span>
        </a>

        <a class="action" href="contact.html">
          <strong>ãŠå•ã„åˆã‚ã›</strong>
          <span>ä¸æ˜ç‚¹ãƒ»ã”ç›¸è«‡ã¯ã“ã¡ã‚‰ã€‚</span>
        </a>

        <a class="action" href="apply.html">
          <strong>ç™»éŒ²æƒ…å ±ã®ä¿®æ­£ä¾é ¼</strong>
          <span>ãƒ¡ãƒ¼ãƒ«å¤‰æ›´ãªã©ã¯é‹å–¶ãŒå¯¾å¿œã—ã¾ã™ã€‚</span>
        </a>

        <a class="action" href="index.html#service">
          <strong>ã‚µãƒ¼ãƒ“ã‚¹å†…å®¹ã‚’è¦‹ã‚‹</strong>
          <span>æµã‚Œãƒ»æ–™é‡‘ãƒ»æ³¨æ„äº‹é …ã‚’ç¢ºèªã€‚</span>
        </a>
      </div>

      <hr class="sep">

      <h2 style="margin:0 0 8px;font-size:16px;">ã‚ãªãŸã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«</h2>
      <p style="margin:0 0 10px;color:var(--muted);font-size:13px;line-height:1.8">
        å…¥åŠ›ã—ãŸå†…å®¹ã¯ã€ç´¹ä»‹ç²¾åº¦ã®å‘ä¸Šã«ä½¿ã‚ã‚Œã¾ã™ã€‚
      </p>

      <div class="profileGrid" id="profileGrid">
        <div class="pbox"><div class="k">å®‰å¿ƒã§ãã‚‹é–¢ä¿‚æ€§</div><div class="v" id="pv_q1">æœªå…¥åŠ›</div></div>
        <div class="pbox"><div class="k">é‡‘éŠ­æ„Ÿè¦š</div><div class="v" id="pv_q2">æœªå…¥åŠ›</div></div>
        <div class="pbox"><div class="k">ç”Ÿæ´»ã®ãƒšãƒ¼ã‚¹</div><div class="v" id="pv_q3">æœªå…¥åŠ›</div></div>
        <div class="pbox"><div class="k">ä¼šè©±ãƒ»ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³</div><div class="v" id="pv_q4">æœªå…¥åŠ›</div></div>
        <div class="pbox"><div class="k">å°†æ¥ãƒ»å†å©šã¸ã®è€ƒãˆæ–¹</div><div class="v" id="pv_q5">æœªå…¥åŠ›</div></div>
        <div class="pbox"><div class="k">å®‰å…¨é¢ãƒ»è·é›¢</div><div class="v" id="pv_q6">æœªå…¥åŠ›</div></div>
        <div class="pbox"><div class="k">æ€§æ ¼</div><div class="v" id="pv_q7">æœªå…¥åŠ›</div></div>
        <div class="pbox"><div class="k">å¥½ããªãƒšãƒƒãƒˆ</div><div class="v" id="pv_q8">æœªå…¥åŠ›</div></div>

        <div class="bio">
          <div class="k">è‡ªå·±ç´¹ä»‹</div>
          <div class="v" id="pv_bio">æœªå…¥åŠ›</div>
        </div>
      </div>

      <div class="miniBtnRow">
        <a class="btn" href="diagnosis.html">ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’ç·¨é›†ã™ã‚‹</a>
        <span class="pill" id="updatedAtPill" style="display:none;">æœ€çµ‚æ›´æ–°ï¼š-</span>
      </div>

      <!-- ç´¹ä»‹å¸Œæœ›ã®æ¡ˆå†…æ–‡ -->
      <div class="notice" style="margin-top:12px;">
        <strong>ç´¹ä»‹å¸Œæœ›ã®å ´åˆã¯ã€</strong><a href="contact.html">ãŠå•ã„åˆã‚ã›</a>ã‹ã‚‰
        <strong>ã€Œç´¹ä»‹å¸Œæœ›ã€</strong>ã¨è¨˜è¼‰ã®ä¸Šã€é€ä¿¡ãã ã•ã„ã€‚
      </div>

      <hr class="sep">

      <div class="rule">
        âœ… ã”ç´¹ä»‹ã¯ <strong>åŒæ–¹ã®åˆæ„ãŒå¾—ã‚‰ã‚ŒãŸå ´åˆã®ã¿</strong> è¡Œã‚ã‚Œã¾ã™ã€‚<br>
        âœ… ç´¹ä»‹æˆç«‹æ™‚ã®ã¿ <strong>1ä»¶5,000å††ï¼ˆç¨è¾¼ï¼‰</strong> ãŒç™ºç”Ÿã—ã¾ã™ã€‚
      </div>

      <div class="small">
        â€» ä¼šå“¡ãƒšãƒ¼ã‚¸ã®å†…å®¹ã¯ç¬¬ä¸‰è€…ã«å…±æœ‰ã—ãªã„ã§ãã ã•ã„ã€‚
      </div>
    </div>

    <!-- å³ -->
    <div class="card">
      <h2>ã”åˆ©ç”¨ã‚¬ã‚¤ãƒ‰</h2>
      <div class="list">
        <div class="rule"><strong>1.</strong> ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å…¥åŠ›ï¼ˆä¾¡å€¤è¦³ï¼‹è‡ªå·±ç´¹ä»‹ï¼‰</div>
        <div class="rule"><strong>2.</strong> æ¡ä»¶ãŒè¿‘ã„æ–¹ãŒè¦‹ã¤ã‹ã‚‹ã¨ã”é€£çµ¡</div>
        <div class="rule"><strong>3.</strong> åˆæ„å¾Œã€ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ‡ãƒ¼ãƒˆã¸</div>
      </div>

      <hr class="sep">

      <h2>å¤§åˆ‡ãªãŠé¡˜ã„</h2>
      <div class="list">
        <div class="rule">
          ğŸŒ¿ <strong>ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒ‡ãƒ¼ãƒˆã¯é¡”å‡ºã—ãªã—</strong><br>
          ã‚¢ãƒã‚¿ãƒ¼ã‚’ä½¿ç”¨ã—ãŸã€å®‰å¿ƒã§ãã‚‹å½¢å¼ã§è¡Œã„ã¾ã™ã€‚
        </div>
        <div class="rule">
          ğŸ¤ <strong>ãƒ‡ãƒ¼ãƒˆæˆç«‹å¾Œã®ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã¯ã§ãã¾ã›ã‚“</strong><br>
          ãŠç›¸æ‰‹ã®æ°—æŒã¡ã‚’å¤§åˆ‡ã«ã—ãŸé€²è¡Œã‚’ãŠé¡˜ã„ã—ã¦ã„ã¾ã™ã€‚
        </div>
        <div class="rule">
          ğŸ’¡ <strong>ç´¹ä»‹æˆç«‹å¾Œã®ã”è¿”é‡‘ã¯ã§ãã¾ã›ã‚“</strong><br>
          åˆæ„ã®ã‚‚ã¨ã§æˆç«‹ã—ãŸã”ç´¹ä»‹ã®ãŸã‚ã€ã”äº†æ‰¿ãã ã•ã„ã€‚
        </div>
      </div>
    </div>
  </div>

</div>

<script>
/* ===== è¨­å®š ===== */
const GAS_URL = "https://script.google.com/macros/s/AKfycbx79zOLPWQ85wu_qS4uWAsDJKV8uWr35eLK21IaHd6jfe6XRS1Di-nCudb45t5eaEy-GA/exec";

/* ===== ãƒ­ã‚°ã‚¤ãƒ³ã‚¬ãƒ¼ãƒ‰ ===== */
if(localStorage.getItem("member_ok") !== "1"){
  location.href = "login.html";
}

/* ===== åŸºæœ¬è¡¨ç¤º ===== */
const name = localStorage.getItem("member_name") || "";
const memberId = localStorage.getItem("member_id") || "";

document.getElementById("name").textContent = name ? `${name}ã•ã‚“` : "ä¼šå“¡ã•ã¾";
if(memberId){
  const pill = document.getElementById("pillId");
  pill.style.display = "inline-flex";
  pill.textContent = `ä¼šå“¡IDï¼š${memberId}`;
}

/* ===== ä»Šæ—¥ã®åŠ è­·ï¼ˆç¥åï¼‰ï¼šæ—¥ä»˜å›ºå®šã®ç–‘ä¼¼ãƒ©ãƒ³ãƒ€ãƒ  ===== */
(function(){
  const GODS = [
    { name:"ã‚¢ãƒ†ãƒŠ",  desc:"çŸ¥æµã¨æˆ¦ç•¥ã®åŠ è­·ã€‚è½ã¡ç€ã„ã¦æ•´ç†ã—ã¦ä¼ãˆã‚‹ã»ã©ã€è©±ãŒé€²ã¿ã‚„ã™ã„æ—¥ã€‚" },
    { name:"ã‚¢ãƒãƒ­ãƒ³",desc:"èª¿å’Œã®åŠ è­·ã€‚è¨€è‘‰ã‚’æ•´ãˆã‚‹ã»ã©ã€èª¤è§£ãŒã»ã©ã‘ã‚„ã™ã„æ—¥ã€‚" },
    { name:"ã‚¢ãƒ«ãƒ†ãƒŸã‚¹",desc:"å®ˆè­·ã®åŠ è­·ã€‚ç„¡ç†ã‚’ã—ãªã„é¸æŠãŒã€å®‰å¿ƒã«ã¤ãªãŒã‚Šã‚„ã™ã„æ—¥ã€‚" },
    { name:"ãƒ˜ãƒ«ãƒ¡ã‚¹",desc:"æ©‹æ¸¡ã—ã®åŠ è­·ã€‚å°ã•ãªä¸€æ­©ãŒã€æ¬¡ã«ã¤ãªãŒã‚Šã‚„ã™ã„æ—¥ã€‚" },
    { name:"ãƒ˜ã‚¹ãƒ†ã‚£ã‚¢",desc:"å®‰å¿ƒã®åŠ è­·ã€‚å±…å¿ƒåœ°ã®è‰¯ã•ã‚’å¤§åˆ‡ã«ã™ã‚‹ã¨ã€æ•´ã„ã‚„ã™ã„æ—¥ã€‚" },
    { name:"ãƒ˜ãƒ©",    desc:"èª å®Ÿã®åŠ è­·ã€‚ä¸å¯§ã«é€²ã‚ã‚‹ã»ã©ã€ä¿¡é ¼ãŒç©ã¿ä¸ŠãŒã‚Šã‚„ã™ã„æ—¥ã€‚" },
    { name:"ãƒ‡ãƒ¡ãƒ†ãƒ«",desc:"è‚²ã¿ã®åŠ è­·ã€‚ç„¦ã‚‰ãšè‚²ã¦ã‚‹å§¿å‹¢ãŒã€è¿‘é“ã«ãªã‚Šã‚„ã™ã„æ—¥ã€‚" },
    { name:"ã‚¢ãƒ•ãƒ­ãƒ‡ã‚£ãƒ¼ãƒ†",desc:"ã‚„ã•ã—ã•ã®åŠ è­·ã€‚è‡ªåˆ†ã‚’å¤§åˆ‡ã«æ‰±ã†ã»ã©ã€è¡¨æƒ…ãŒæŸ”ã‚‰ãæ—¥ã€‚" },
    { name:"ã‚¼ã‚¦ã‚¹",  desc:"æ±ºæ–­ã®åŠ è­·ã€‚å°ã•ãæ±ºã‚ã‚‹ã“ã¨ã§ã€å‰ã«é€²ã¿ã‚„ã™ã„æ—¥ã€‚" }
  ];

  function hash(str){
    let h=2166136261;
    for(let i=0;i<str.length;i++){
      h^=str.charCodeAt(i);
      h=Math.imul(h,16777619);
    }
    return (h>>>0);
  }

  const d=new Date();
  const key=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`;
  const g=GODS[hash(key)%GODS.length];

  const nameEl = document.getElementById("godName");
  const descEl = document.getElementById("godDesc");

  if(nameEl) nameEl.textContent = g.name;
  if(descEl){
    descEl.textContent =
      `${g.desc}\nâ€» ã“ã‚Œã¯ã‚²ãƒ¼ãƒ æ¼”å‡ºã§ã™ã€‚ç›¸æ€§ãƒ»ç´¹ä»‹æˆç«‹ãƒ»æˆç´„ãªã©ã‚’ä¿è¨¼ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚`;
  }
})();

/* =======================================================
   ç•ªå·â†’å›ç­”æ–‡ã«å¤‰æ›ã—ã¦è¡¨ç¤º
======================================================= */
const ANSWERS = {
  q1: {
    "1":"ã¨ã«ã‹ãç©ã‚„ã‹ã«ã€æ³¢é¢¨ãªãéã”ã—ãŸã„",
    "2":"ä¸å®‰ãªæ™‚ã¯ã€ã™ãè©±ã—ã¦å®‰å¿ƒã—ãŸã„",
    "3":"è‡ªç«‹ã—ã¤ã¤ã€å¿…è¦ãªæ™‚ã¯æ”¯ãˆåˆã„ãŸã„",
    "4":"é©åº¦ãªåˆºæ¿€ã‚„å¤‰åŒ–ã‚‚ã»ã—ã„",
    "5":"æ„Ÿæƒ…è¡¨ç¾ãŒå¤šã„é–¢ä¿‚ã®æ–¹ãŒè½ã¡ç€ã"
  },
  q2: {
    "1":"å°†æ¥ã®å®‰å¿ƒã‚’æœ€å„ªå…ˆã—ãŸã„",
    "2":"åŸºæœ¬ã¯å …å®Ÿã€ãŸã¾ã®æ¥½ã—ã¿ã¯OK",
    "3":"åæ”¯ãŒåˆã£ã¦ã„ã‚Œã°ç´°ã‹ãç®¡ç†ã—ãªã„",
    "4":"ä»Šã®å……å®Ÿã‚’å¤§åˆ‡ã«ã—ãŸã„",
    "5":"ãŠé‡‘ã®ã“ã¨ã¯ãŠäº’ã„è‡ªç”±ãŒã„ã„"
  },
  q3: {
    "1":"è¦å‰‡æ­£ã—ãã€è½ã¡ç€ã„ãŸç”Ÿæ´»ãŒå¥½ã",
    "2":"ä»•äº‹ã¨ç§ç”Ÿæ´»ã®ãƒãƒ©ãƒ³ã‚¹ã‚’å¤§åˆ‡ã«ã—ãŸã„",
    "3":"ãã®æ™‚ã€…ã§æŸ”è»Ÿã«éã”ã—ãŸã„",
    "4":"ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«å¤–ã¸å‡ºã‚‹ã“ã¨ãŒå¤šã„",
    "5":"ãƒã‚¤ãƒšãƒ¼ã‚¹ã§ä¸€äººæ™‚é–“ã‚‚å¤šã‚"
  },
  q4: {
    "1":"ç›¸æ‰‹ã®è©±ã‚’èãæ–¹ãŒå¤šã„",
    "2":"å…±æ„Ÿã—ãªãŒã‚‰è©±ã™ä¼šè©±ãŒå¥½ã",
    "3":"è©±ã™ãƒ»èãã¯åŠã€…ãã‚‰ã„",
    "4":"æ˜ã‚‹ããƒ†ãƒ³ãƒã®ã„ã„ä¼šè©±ãŒå¥½ã",
    "5":"æ·±ã„è©±ã‚„æœ¬éŸ³ã®ã‚„ã‚Šå–ã‚ŠãŒå¥½ã"
  },
  q5: {
    "1":"ã‚†ã£ãã‚Šã€å®‰å¿ƒã‚’ç©ã¿é‡ã­ã¦è€ƒãˆãŸã„",
    "2":"ã‚ã‚‹ç¨‹åº¦ã®æœŸé–“ã‚’æ±ºã‚ã¦é€²ã¿ãŸã„",
    "3":"çŠ¶æ³ã‚’è¦‹ãªãŒã‚‰è‡ªç„¶ã«æ±ºã‚ãŸã„",
    "4":"å‰å‘ãã«ã€æ—©ã‚ã«å½¢ã«ã—ãŸã„",
    "5":"å†å©šãƒ»çµå©šã«å¼·ã„ã“ã ã‚ã‚Šã¯ãªã„"
  },
  q6: {
    "1":"ãƒˆãƒ©ãƒ–ãƒ«ã‚’é¿ã‘ã€å®‰å®šã‚’æœ€å„ªå…ˆã—ãŸã„",
    "2":"ãŠäº’ã„ã«é…æ…®ã§ãã‚‹é–¢ä¿‚ãŒã„ã„",
    "3":"æ™®é€šã®æ„Ÿè¦šã§å•é¡Œãªãéã”ã›ã‚‹",
    "4":"å¤šå°‘ã®é•ã„ã¯å—ã‘å…¥ã‚Œã‚‰ã‚Œã‚‹",
    "5":"ç´°ã‹ã„ã“ã¨ã¯æ°—ã«ã—ãªã„æ–¹ã ã¨æ€ã†"
  },
  q7: {
    "1":"ç©ã‚„ã‹ã‚",
    "2":"æ˜ã‚‹ã‚",
    "3":"ã¾ã˜ã‚ã‚",
    "4":"ãƒã‚¤ãƒšãƒ¼ã‚¹",
    "5":"è¡Œå‹•æ´¾"
  },
  q8: {
    "1":"çŠ¬",
    "2":"çŒ«",
    "3":"å°å‹•ç‰©",
    "4":"ã©ã‚Œã‚‚å¥½ã",
    "5":"ãƒšãƒƒãƒˆã¯è‹¦æ‰‹"
  }
};

function toAnswer(key, raw){
  const v = String(raw || "").trim();
  if(!v) return "æœªå…¥åŠ›";
  if(!/^\d+$/.test(v)) return v;
  const map = ANSWERS[key] || {};
  return map[v] || `æœªå…¥åŠ›`;
}

function setText(id, text){
  const el = document.getElementById(id);
  if(el) el.textContent = text;
}

/* ===== è‡ªåˆ†ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’GASã‹ã‚‰å–å¾—ã—ã¦è¡¨ç¤º ===== */
async function loadMyProfile(){
  if(!memberId) return;

  try{
    const res = await fetch(`${GAS_URL}?action=list_values&_=${Date.now()}`, { cache:"no-store" });
    const data = await res.json();
    if(!data || !data.ok) return;

    const me = (data.items || []).find(x => String(x.id || "").toLowerCase() === String(memberId).toLowerCase());
    if(!me){
      return;
    }

    setText("pv_q1", toAnswer("q1", me.q1));
    setText("pv_q2", toAnswer("q2", me.q2));
    setText("pv_q3", toAnswer("q3", me.q3));
    setText("pv_q4", toAnswer("q4", me.q4));
    setText("pv_q5", toAnswer("q5", me.q5));
    setText("pv_q6", toAnswer("q6", me.q6));
    setText("pv_q7", toAnswer("q7", me.q7));
    setText("pv_q8", toAnswer("q8", me.q8));

    setText("pv_bio", (String(me.bio || "").trim() ? me.bio : "æœªå…¥åŠ›"));

    if(me.updatedAt){
      const d = new Date(me.updatedAt);
      if(!isNaN(d.getTime())){
        const pill = document.getElementById("updatedAtPill");
        pill.style.display = "inline-flex";
        pill.textContent = `æœ€çµ‚æ›´æ–°ï¼š${d.toLocaleString()}`;
      }
    }
  }catch(e){
    console.error(e);
  }
}

loadMyProfile();

/* ===== ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ ===== */
document.getElementById("logoutBtn").addEventListener("click", ()=>{
  if(!confirm("ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ã¾ã™ã‹ï¼Ÿ")) return;
  localStorage.clear();
  location.href = "login.html";
});
</script>

</body>
</html>